<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<meta name="theme-color" content="#0a1628"/>
<title>ğŸŒŸ Mundo MÃ¡gico</title>
<link href="https://fonts.googleapis.com/css2?family=Boogaloo&family=Nunito:wght@700;800;900&display=swap" rel="stylesheet"/>
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESET & BASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
html{height:100%;touch-action:manipulation;overscroll-behavior:none}
body{
  font-family:'Nunito',sans-serif;
  background:#0a1628;color:#fff;
  width:100vw;height:100dvh;
  overflow:hidden;position:fixed;
  -webkit-user-select:none;user-select:none;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DESIGN TOKENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root{
  --night1:#0a1628;--night2:#0d1f3c;--night3:#112244;
  --forest1:#0d2b1f;--forest2:#1a4030;
  --gold:#ffd700;--gold2:#ffb300;--goldg:linear-gradient(135deg,#ffe066,#ffa500);
  --pink:#ff6eb4;--cyan:#00d4ff;--mint:#00ffb3;
  --coral:#ff7043;--purple:#c77dff;--lime:#b5f542;
  --red:#ff4757;--green:#2ed573;
  --card:#0f2044;--card2:#162855;
  --border:rgba(255,255,255,0.12);
  --shadow:0 8px 32px rgba(0,0,0,0.4);
  --fh:'Boogaloo',cursive;--fb:'Nunito',sans-serif;
  --r:18px;--r2:24px;
  --sat:env(safe-area-inset-top,0px);
  --sab:env(safe-area-inset-bottom,0px);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FUNDO MÃGICO â€” CEU ESTRELADO + AURORA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#universe{
  position:fixed;inset:0;z-index:0;overflow:hidden;
  background:radial-gradient(ellipse at 20% 10%,#1a2a5e 0%,#0a1628 35%,#050e1f 100%);
}
.star{
  position:absolute;border-radius:50%;background:#fff;
  animation:twinkle var(--td,2s) ease-in-out infinite var(--dd,0s);
}
@keyframes twinkle{0%,100%{opacity:.15;transform:scale(.7)}50%{opacity:1;transform:scale(1.3)}}

.aurora{
  position:absolute;width:200%;height:60%;
  top:-10%;left:-50%;
  opacity:0.07;
  animation:auroraMove 12s ease-in-out infinite;
  border-radius:50%;
  filter:blur(40px);
}
.aurora1{background:linear-gradient(180deg,#00d4ff,#c77dff,transparent);animation-delay:0s}
.aurora2{background:linear-gradient(180deg,#ff6eb4,#00ffb3,transparent);animation-delay:-6s}
@keyframes auroraMove{0%,100%{transform:translateX(0) scaleY(1)}50%{transform:translateX(-15%) scaleY(1.3)}}

/* Ãrvores da floresta no fundo */
.tree-row{
  position:absolute;bottom:0;left:0;right:0;
  height:25dvh;pointer-events:none;
  background:
    radial-gradient(ellipse 60px 120px at 5% 100%,#071a0f 50%,transparent 51%),
    radial-gradient(ellipse 80px 150px at 12% 100%,#0a2215 50%,transparent 51%),
    radial-gradient(ellipse 55px 110px at 20% 100%,#071a0f 50%,transparent 51%),
    radial-gradient(ellipse 90px 160px at 30% 100%,#0a2215 50%,transparent 51%),
    radial-gradient(ellipse 65px 130px at 42% 100%,#071a0f 50%,transparent 51%),
    radial-gradient(ellipse 75px 140px at 55% 100%,#0a2215 50%,transparent 51%),
    radial-gradient(ellipse 60px 120px at 65% 100%,#071a0f 50%,transparent 51%),
    radial-gradient(ellipse 85px 155px at 78% 100%,#0a2215 50%,transparent 51%),
    radial-gradient(ellipse 70px 135px at 88% 100%,#071a0f 50%,transparent 51%),
    radial-gradient(ellipse 55px 115px at 97% 100%,#0a2215 50%,transparent 51%);
  opacity:0.9;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TELAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.screen{
  position:fixed;inset:0;z-index:10;
  width:100vw;height:100dvh;
  display:none;flex-direction:column;
  align-items:center;overflow:hidden;
  padding-top:var(--sat);padding-bottom:var(--sab);
}
.screen.on{display:flex}
#sMenu{overflow-y:auto;-webkit-overflow-scrolling:touch}
#sResult{justify-content:center;align-items:center;overflow-y:auto}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MENU PRINCIPAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.menu-scroll{
  display:flex;flex-direction:column;align-items:center;
  min-height:100%;width:100%;
  padding:20px 16px 24px;gap:16px;
}

/* Logo */
.logo-area{text-align:center;position:relative;padding:8px 0}
.logo-moon{
  display:block;font-size:clamp(3rem,16vw,5.5rem);
  filter:drop-shadow(0 0 24px #ffd700) drop-shadow(0 0 48px rgba(255,215,0,.4));
  animation:moonPulse 3s ease-in-out infinite;
}
@keyframes moonPulse{
  0%,100%{transform:translateY(0) scale(1);filter:drop-shadow(0 0 24px #ffd700) drop-shadow(0 0 48px rgba(255,215,0,.4))}
  50%{transform:translateY(-12px) scale(1.06);filter:drop-shadow(0 0 40px #ffd700) drop-shadow(0 0 80px rgba(255,215,0,.6))}
}
.logo-title{
  font-family:var(--fh);
  font-size:clamp(2.2rem,11vw,3.8rem);
  line-height:1.05;
  background:linear-gradient(135deg,#ffe066 0%,#ff9f43 40%,#ff6eb4 70%,#c77dff 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  background-clip:text;
  filter:drop-shadow(0 2px 12px rgba(255,158,67,.5));
}
.logo-stars-deco{
  display:flex;justify-content:center;gap:10px;margin-top:6px;
  font-size:clamp(1rem,4vw,1.3rem);
}
.logo-stars-deco span{
  display:inline-block;
  animation:starFloat var(--sf,2s) ease-in-out infinite var(--sd,0s);
}
@keyframes starFloat{0%,100%{transform:translateY(0) scale(1)}50%{transform:translateY(-5px) scale(1.2)}}
.logo-sub{
  font-size:clamp(0.85rem,3.5vw,1.05rem);
  color:rgba(255,255,255,.6);margin-top:3px;
  animation:breathe 2.5s ease-in-out infinite;
}
@keyframes breathe{0%,100%{opacity:.6}50%{opacity:1}}

/* Cards de jogos */
.game-grid{
  display:grid;grid-template-columns:1fr 1fr;
  gap:12px;width:100%;
}
.game-card{
  background:var(--card);
  border:2px solid var(--border);
  border-radius:var(--r2);
  padding:clamp(14px,4vw,20px) 10px clamp(12px,3.5vw,18px);
  display:flex;flex-direction:column;align-items:center;gap:5px;
  cursor:pointer;touch-action:manipulation;
  position:relative;overflow:hidden;
  transition:transform .16s cubic-bezier(.34,1.56,.64,1),border-color .16s;
  box-shadow:var(--shadow);
}
.game-card::before{
  content:'';position:absolute;inset:0;opacity:0;transition:opacity .3s;
  background:radial-gradient(circle at 50% 40%,var(--gc,#fff3) 0%,transparent 70%);
}
.game-card:active{transform:scale(.91);border-color:var(--gc,white)}
.game-card:active::before{opacity:1}
.gc1{--gc:#ffd700aa} .gc2{--gc:#00d4ffaa} .gc3{--gc:#ff6eb4aa}

.card-icon{
  font-size:clamp(2.4rem,11vw,3.5rem);line-height:1;
  animation:cardFloat var(--cf,2.5s) ease-in-out infinite;
  filter:drop-shadow(0 4px 12px rgba(0,0,0,.5));
}
.gc1 .card-icon{--cf:2.4s} .gc2 .card-icon{--cf:2.8s} .gc3 .card-icon{--cf:2.1s}
@keyframes cardFloat{0%,100%{transform:translateY(0) rotate(-3deg)}50%{transform:translateY(-8px) rotate(3deg)}}

.card-name{
  font-family:var(--fh);font-size:clamp(.95rem,4vw,1.2rem);
  text-align:center;line-height:1.2;
}
.card-desc{font-size:clamp(.65rem,2.6vw,.8rem);color:rgba(255,255,255,.55);text-align:center}
.card-stars{font-size:clamp(.88rem,3.5vw,1rem);letter-spacing:2px;color:var(--gold);margin-top:2px}

/* Card labirinto (full width) */
.game-card.full{
  flex-direction:row;grid-column:1/-1;
  padding:clamp(12px,3.5vw,18px) 18px;gap:14px;
}
.game-card.full .card-icon{--cf:3s;font-size:clamp(2rem,9vw,3rem)}
.game-card.full .card-text{flex:1;text-align:left}

/* Moedas */
.coins-row{
  display:flex;align-items:center;justify-content:center;gap:8px;
  background:rgba(255,215,0,.1);border:1.5px solid rgba(255,215,0,.25);
  border-radius:40px;padding:8px 22px;width:fit-content;
  animation:coinsGlow 3s ease-in-out infinite;
}
@keyframes coinsGlow{0%,100%{box-shadow:0 0 0 transparent}50%{box-shadow:0 0 20px rgba(255,215,0,.3)}}
.coins-label{font-family:var(--fh);font-size:clamp(.9rem,3.8vw,1.1rem);color:var(--gold)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER JOGOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.hdr{
  display:flex;align-items:center;justify-content:space-between;
  width:100%;height:52px;padding:0 10px;flex-shrink:0;
  background:rgba(10,22,40,.9);backdrop-filter:blur(12px);
  border-bottom:1px solid rgba(255,255,255,.07);z-index:5;
}
.hbtn{
  background:rgba(255,255,255,.1);border:1.5px solid rgba(255,255,255,.18);
  border-radius:12px;font-size:1.15rem;
  width:40px;height:40px;display:flex;align-items:center;justify-content:center;
  cursor:pointer;touch-action:manipulation;color:#fff;flex-shrink:0;
  transition:transform .12s,background .15s;
}
.hbtn:active{transform:scale(.82);background:rgba(255,255,255,.22)}
.hud{display:flex;gap:6px;align-items:center;flex-wrap:wrap;justify-content:center}
.pill{
  display:flex;align-items:center;gap:3px;
  background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.1);
  border-radius:20px;padding:3px 9px;
  font-family:var(--fh);font-size:clamp(.68rem,2.8vw,.85rem);
  font-weight:600;white-space:nowrap;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   JOGO DO ALFABETO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.alpha-body{
  display:flex;flex-direction:column;align-items:center;
  width:100%;flex:1;min-height:0;
  padding:8px 12px 10px;gap:7px;overflow:hidden;
}

/* Barra de progresso arco-Ã­ris */
.pbar-wrap{width:100%;height:9px;background:rgba(255,255,255,.1);border-radius:10px;overflow:hidden;flex-shrink:0}
.pbar-fill{
  height:100%;border-radius:10px;
  background:linear-gradient(90deg,#ff6eb4,#ffd700,#00d4ff,#00ffb3);
  background-size:300% 100%;
  animation:pbarShimmer 2s linear infinite;
  transition:width .6s cubic-bezier(.34,1.56,.64,1);
}
@keyframes pbarShimmer{0%{background-position:100% 0}100%{background-position:-100% 0}}

/* Card do animal */
.acard{
  width:100%;background:var(--card);
  border:2px solid var(--border);border-radius:var(--r2);
  padding:12px 12px 10px;text-align:center;
  flex-shrink:0;position:relative;overflow:hidden;
  animation:aCardIn .5s cubic-bezier(.34,1.56,.64,1);
  box-shadow:var(--shadow);
}
.acard::after{
  content:'';position:absolute;inset:0;pointer-events:none;
  background:radial-gradient(ellipse at 50% 0%,rgba(255,255,255,.06) 0%,transparent 60%);
}
@keyframes aCardIn{from{transform:scale(.75) translateY(40px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}
.aemoji{
  font-size:clamp(4rem,20vw,7rem);line-height:1;display:block;margin-bottom:4px;
  filter:drop-shadow(0 8px 20px rgba(0,0,0,.6));
  animation:emojiDance 2.6s ease-in-out infinite;
}
@keyframes emojiDance{
  0%,100%{transform:translateY(0) rotate(-4deg) scale(1)}
  30%{transform:translateY(-14px) rotate(4deg) scale(1.05)}
  60%{transform:translateY(-7px) rotate(-2deg) scale(1.02)}
}
.aword{
  font-family:var(--fh);font-size:clamp(1.4rem,6vw,2.1rem);
  color:var(--gold);letter-spacing:3px;text-transform:uppercase;
  text-shadow:0 0 20px rgba(255,215,0,.5);
}
.ahint{font-size:clamp(.72rem,3vw,.88rem);color:rgba(255,255,255,.5);margin-top:2px}

.aquestion{
  font-family:var(--fh);font-size:clamp(.92rem,3.8vw,1.1rem);
  color:rgba(255,255,255,.85);text-align:center;flex-shrink:0;
}

/* OpÃ§Ãµes â€” 4 letras grandes */
.aopts{
  display:grid;grid-template-columns:repeat(4,1fr);
  gap:7px;width:100%;flex-shrink:0;
}
.obtn{
  background:var(--card2);border:2.5px solid rgba(255,255,255,.2);
  border-radius:16px;font-family:var(--fh);font-weight:700;
  font-size:clamp(1.7rem,7.5vw,2.4rem);color:#fff;
  height:clamp(60px,17vw,84px);
  cursor:pointer;touch-action:manipulation;
  position:relative;overflow:hidden;
  transition:transform .1s,border-color .15s;
}
.obtn:active{transform:scale(.88)}
.obtn.hit{
  background:linear-gradient(135deg,#00ff88,#00c8a0);
  border-color:var(--mint);
  animation:hitPop .45s cubic-bezier(.34,1.56,.64,1);
}
.obtn.miss{
  background:linear-gradient(135deg,#ff4757,#c0392b);
  border-color:var(--red);
  animation:missShake .4s ease;
}
@keyframes hitPop{0%{transform:scale(1)}40%{transform:scale(1.25)}100%{transform:scale(1)}}
@keyframes missShake{0%,100%{transform:translateX(0)}20%{transform:translateX(-9px)}60%{transform:translateX(9px)}}
.obtn:disabled{cursor:default}

.afb{
  width:100%;font-family:var(--fh);font-weight:700;
  font-size:clamp(.95rem,4vw,1.15rem);
  padding:10px 14px;border-radius:14px;text-align:center;flex-shrink:0;
  animation:fbPop .35s cubic-bezier(.34,1.56,.64,1);
}
@keyframes fbPop{from{transform:scale(.8) translateY(12px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}
.afb.ok {background:rgba(0,255,136,.14);color:var(--mint);border:1.5px solid rgba(0,255,136,.3)}
.afb.err{background:rgba(255,71,87,.14);color:#ff7d8c;border:1.5px solid rgba(255,71,87,.3)}

.btn-next{
  width:100%;background:var(--goldg);color:#1a0e00;border:none;
  font-family:var(--fh);font-size:clamp(1rem,4.2vw,1.18rem);
  border-radius:16px;height:clamp(50px,13vw,64px);
  cursor:pointer;touch-action:manipulation;flex-shrink:0;
  box-shadow:0 6px 24px rgba(255,215,0,.35);
  transition:transform .12s;
}
.btn-next:active{transform:scale(.96)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   JOGO DA MEMÃ“RIA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.diffbar{
  display:flex;gap:6px;width:100%;height:38px;
  padding:0 10px;flex-shrink:0;align-items:center;
}
.dbtn{
  flex:1;height:30px;background:rgba(255,255,255,.07);
  border:1.5px solid rgba(255,255,255,.12);border-radius:10px;
  font-family:var(--fh);font-weight:600;
  font-size:clamp(.68rem,2.8vw,.82rem);color:rgba(255,255,255,.6);
  cursor:pointer;touch-action:manipulation;white-space:nowrap;transition:all .15s;
}
.dbtn.on{background:rgba(0,212,255,.15);border-color:var(--cyan);color:var(--cyan);box-shadow:0 0 12px rgba(0,212,255,.25)}
.dbtn:active{transform:scale(.92)}

.mgrid{display:grid;flex-shrink:0}

/* MemÃ³ria card */
.mc{position:relative;cursor:pointer;touch-action:manipulation;flex-shrink:0}
.mci{
  width:100%;height:100%;position:relative;
  transform-style:preserve-3d;
  transition:transform .48s cubic-bezier(.3,1.6,.5,1);
  border-radius:14px;
}
.mc.fp .mci,.mc.mp .mci{transform:rotateY(180deg)}
.mc.mx .mci{animation:mcShk .42s ease}
@keyframes mcShk{0%,100%{transform:rotateY(180deg) translateX(0)}30%{transform:rotateY(180deg) translateX(-8px)}70%{transform:rotateY(180deg) translateX(8px)}}

.mcf,.mcb{
  position:absolute;inset:0;border-radius:14px;
  backface-visibility:hidden;-webkit-backface-visibility:hidden;
  overflow:hidden;
}
.mcf{
  background:linear-gradient(145deg,#0d1f3c,#162855);
  border:2.5px solid rgba(255,255,255,.1);
  display:flex;align-items:center;justify-content:center;
}
/* PadrÃ£o de pontos na frente do card */
.mcf::before{
  content:'';position:absolute;inset:0;
  background-image:radial-gradient(circle,rgba(255,255,255,.08) 1px,transparent 1px);
  background-size:8px 8px;
}
.mcf::after{
  content:'';position:absolute;inset:0;
  background:radial-gradient(circle at 30% 30%,rgba(199,125,255,.12) 0%,transparent 60%),
             radial-gradient(circle at 70% 70%,rgba(0,212,255,.08) 0%,transparent 60%);
}
.mcq{font-size:clamp(1.2rem,5vw,1.9rem);opacity:.25;position:relative;z-index:1}
.mcb{
  background:var(--card);border:2.5px solid rgba(255,255,255,.18);
  transform:rotateY(180deg);
}
.mc.mp .mcb{
  background:linear-gradient(135deg,rgba(0,255,136,.15),rgba(0,200,160,.08));
  border-color:var(--mint);box-shadow:0 0 22px rgba(0,255,136,.2);
}
.mcc{position:absolute;top:0;left:0;display:block;border-radius:12px}
.mclb{
  position:absolute;top:3px;right:3px;
  background:var(--gold);color:#1a0e00;
  font-family:var(--fh);font-size:clamp(.33rem,1.4vw,.58rem);
  padding:2px 5px;border-radius:20px;white-space:nowrap;z-index:5;
  animation:lbPop .3s cubic-bezier(.34,1.56,.64,1);
}
@keyframes lbPop{from{transform:scale(0) rotate(-10deg);opacity:0}to{transform:scale(1) rotate(0);opacity:1}}
.mcface{
  position:absolute;top:50%;left:50%;
  transform:translate(-50%,-50%);
  font-size:clamp(1.1rem,5vw,1.8rem);z-index:10;pointer-events:none;
}
.mcface.hpy{animation:faceHpy .45s cubic-bezier(.34,1.56,.64,1) forwards}
.mcface.sad{animation:faceSad .42s cubic-bezier(.34,1.56,.64,1) forwards}
@keyframes faceHpy{
  0%{transform:translate(-50%,-50%) scale(0) rotate(-15deg);opacity:0}
  65%{transform:translate(-50%,-72%) scale(1.4) rotate(10deg);opacity:1}
  100%{transform:translate(-50%,-66%) scale(1.15) rotate(0);opacity:1}
}
@keyframes faceSad{
  0%{transform:translate(-50%,-50%) scale(0) rotate(15deg);opacity:0}
  65%{transform:translate(-50%,-62%) scale(1.2) rotate(-7deg);opacity:1}
  100%{transform:translate(-50%,-58%) scale(1) rotate(0);opacity:1}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LABIRINTO MÃGICO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#sMaze .game-body{
  display:flex;flex-direction:column;align-items:center;
  width:100%;flex:1;min-height:0;
  padding:7px 10px 8px;gap:7px;overflow:hidden;
}
.maze-topbar{
  display:flex;align-items:center;justify-content:space-between;
  width:100%;flex-shrink:0;
  background:rgba(255,255,255,.06);border-radius:14px;padding:7px 12px;
}
.maze-lvlname{font-family:var(--fh);font-size:clamp(.88rem,3.5vw,1.05rem);color:var(--cyan)}
.hint-btn{
  display:flex;align-items:center;gap:6px;
  background:rgba(255,215,0,.18);border:1.5px solid rgba(255,215,0,.4);
  border-radius:12px;padding:5px 12px;
  font-family:var(--fh);font-weight:700;
  font-size:clamp(.75rem,3vw,.9rem);color:var(--gold);
  cursor:pointer;touch-action:manipulation;
  transition:transform .12s,background .15s;
}
.hint-btn:active{transform:scale(.91);background:rgba(255,215,0,.3)}
.hint-dots{display:flex;gap:4px;align-items:center}
.hdot{width:8px;height:8px;border-radius:50%;background:var(--gold);transition:background .3s,transform .3s}
.hdot.used{background:rgba(255,255,255,.2);transform:scale(.7)}

/* Canvas wrapper com sombra mÃ¡gica */
.maze-wrap{
  position:relative;flex-shrink:0;
  border-radius:20px;overflow:hidden;
  box-shadow:0 0 0 2px rgba(0,212,255,.3),0 0 40px rgba(0,212,255,.15),var(--shadow);
  animation:mazeGlow 4s ease-in-out infinite;
}
@keyframes mazeGlow{0%,100%{box-shadow:0 0 0 2px rgba(0,212,255,.3),0 0 40px rgba(0,212,255,.15),var(--shadow)}50%{box-shadow:0 0 0 2px rgba(199,125,255,.4),0 0 60px rgba(199,125,255,.2),var(--shadow)}}
#mc{display:block}

/* Controles do labirinto â€” grande para dedos pequenos */
.maze-pad{
  display:grid;
  grid-template:
    ". up ."
    "lf cn rt"
    / 1fr 1fr 1fr;
  gap:8px;
  width:min(220px,60vw);flex-shrink:0;
}
.dpad{
  background:rgba(255,255,255,.1);
  border:2px solid rgba(255,255,255,.18);
  border-radius:14px;font-size:clamp(1.4rem,6vw,2rem);
  cursor:pointer;touch-action:manipulation;
  aspect-ratio:1;display:flex;align-items:center;justify-content:center;
  transition:transform .1s,background .1s;
  box-shadow:0 4px 12px rgba(0,0,0,.3);
}
.dpad:active{transform:scale(.86);background:rgba(255,255,255,.22)}
#dUp  {grid-area:up}
#dLf  {grid-area:lf}
#dCn  {grid-area:cn;background:rgba(255,255,255,.05);cursor:default;font-size:clamp(.7rem,3vw,1rem);color:rgba(255,255,255,.4)}
#dRt  {grid-area:rt}

/* Toast de vitÃ³ria no labirinto */
.maze-toast{
  position:absolute;top:50%;left:50%;
  transform:translate(-50%,-50%);
  background:rgba(5,15,35,.88);backdrop-filter:blur(12px);
  border:2px solid rgba(255,255,255,.2);
  border-radius:22px;padding:18px 26px;
  text-align:center;z-index:20;pointer-events:none;
  animation:toastIn .5s cubic-bezier(.34,1.56,.64,1);
}
@keyframes toastIn{from{transform:translate(-50%,-50%) scale(.6);opacity:0}to{transform:translate(-50%,-50%) scale(1);opacity:1}}
.toast-big{font-size:2.8rem;display:block;margin-bottom:6px}
.toast-txt{font-family:var(--fh);font-size:1.15rem;color:var(--gold)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMAÃ‡Ã•ES ANIMAIS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@keyframes roar{0%{transform:scale(1)rotate(0)}20%{transform:scale(1.5)rotate(-8deg)}40%{transform:scale(1.5)rotate(8deg)}60%{transform:scale(1.5)rotate(-5deg)}80%{transform:scale(1.3)rotate(3deg)}100%{transform:scale(1)rotate(0)}}
@keyframes bark{0%,100%{transform:scale(1)translateY(0)}25%{transform:scale(1.35)translateY(-6px)rotate(10deg)}50%{transform:scale(1.45)}75%{transform:scale(1.3)translateY(-4px)rotate(-8deg)}}
@keyframes scratch{0%{transform:scale(1)}20%{transform:scale(1.3)rotate(-15deg)translateX(-4px)}40%{transform:scale(1.3)rotate(15deg)translateX(4px)}60%{transform:scale(1.3)rotate(-10deg)translateX(-3px)}80%{transform:scale(1.3)rotate(10deg)translateX(3px)}100%{transform:scale(1)rotate(0)}}
@keyframes gallop{0%,100%{transform:scale(1)translateX(0)}20%{transform:scale(1.1)translateX(-8px)rotate(-5deg)}40%{transform:scale(1.1)translateX(8px)rotate(5deg)}60%{transform:scale(1.1)translateX(-5px)rotate(-3deg)}80%{transform:scale(1.1)translateX(5px)rotate(3deg)}}
@keyframes jump{0%{transform:scale(1)translateY(0)}30%{transform:scale(.9,1.2)}50%{transform:scale(1.1,.9)translateY(-18px)}70%{transform:scale(.95,1.05)translateY(0)}85%{transform:scale(1.05,.95)translateY(-6px)}100%{transform:scale(1)translateY(0)}}
@keyframes shakean{0%,100%{transform:scale(1)rotate(0)}20%{transform:scale(1.2)rotate(-12deg)}40%{transform:scale(1.2)rotate(12deg)}60%{transform:scale(1.2)rotate(-8deg)}80%{transform:scale(1.2)rotate(8deg)}}
@keyframes sneak{0%{transform:scale(1)translateX(0)}30%{transform:scale(.9)translateX(-10px)rotate(-5deg)}60%{transform:scale(1.1)translateX(6px)rotate(3deg)}100%{transform:scale(1)translateX(0)}}
@keyframes bouncean{0%,100%{transform:scale(1)translateY(0)}30%{transform:scale(1.15)translateY(-12px)}50%{transform:scale(.95)translateY(0)}70%{transform:scale(1.1)translateY(-7px)}90%{transform:scale(.98)translateY(0)}}
@keyframes fly{0%,100%{transform:scale(1)translateY(0)rotate(0)}25%{transform:scale(1.2)translateY(-10px)rotate(-8deg)}50%{transform:scale(1.3)translateY(-15px)}75%{transform:scale(1.2)translateY(-8px)rotate(8deg)}}
@keyframes spin{0%{transform:scale(1)rotate(0)}50%{transform:scale(1.3)rotate(180deg)}100%{transform:scale(1)rotate(360deg)}}
@keyframes flap{0%,100%{transform:scale(1)rotate(0)}20%{transform:scale(1.2)rotate(-15deg)translateY(-5px)}40%{transform:scale(1.2)rotate(15deg)translateY(-8px)}60%{transform:scale(1.2)rotate(-10deg)translateY(-4px)}80%{transform:scale(1.1)rotate(10deg)translateY(-2px)}}
@keyframes stomp{0%,100%{transform:scale(1)translateY(0)}30%{transform:scale(1.2,.85)translateY(6px)}55%{transform:scale(.9,1.15)translateY(-10px)}75%{transform:scale(1.1,.9)translateY(4px)}}
@keyframes stretcha{0%,100%{transform:scale(1)}40%{transform:scaleY(1.4)translateY(-6px)}70%{transform:scaleY(.85)translateY(3px)}}
@keyframes snapan{0%,100%{transform:scale(1)rotate(0)}20%{transform:scale(1.2)rotate(-20deg)}40%{transform:scale(1.3)rotate(10deg)}60%{transform:scale(1.2)rotate(-10deg)}80%{transform:scale(1.1)rotate(5deg)}}
@keyframes waddle{0%,100%{transform:scale(1)rotate(0)translateX(0)}20%{transform:scale(1.1)rotate(-15deg)translateX(-5px)}40%{transform:scale(1.1)rotate(15deg)translateX(5px)}60%{transform:scale(1.1)rotate(-10deg)translateX(-3px)}80%{transform:scale(1.1)rotate(10deg)translateX(3px)}}
@keyframes fishJ{0%{transform:scale(1)translateY(0)rotate(0)}15%{transform:scale(.9,1.15)rotate(-5deg)}35%{transform:scale(1.1,.9)translateY(-20px)rotate(15deg)}55%{transform:scale(1.05)translateY(-12px)rotate(-8deg)}75%{transform:scale(.95)translateY(-4px)rotate(5deg)}100%{transform:scale(1)translateY(0)rotate(0)}}
@keyframes butterfly{0%,100%{transform:scale(1,1);filter:brightness(1)}15%{transform:scaleX(.3)scaleY(1.1);filter:brightness(1.8)drop-shadow(0 0 8px #fff700)}30%{transform:scaleX(1.1)scaleY(.9);filter:brightness(1.4)drop-shadow(0 0 12px #ff6eb4)}45%{transform:scaleX(.25)scaleY(1.1);filter:brightness(2)drop-shadow(0 0 10px #00d4ff)}60%{transform:scaleX(1.1)scaleY(.95);filter:brightness(1.6)drop-shadow(0 0 12px #ffd700)}75%{transform:scaleX(.4)scaleY(1.05);filter:brightness(1.8)drop-shadow(0 0 8px #ff6eb4)}90%{transform:scaleX(1.05);filter:brightness(1.2)}}
@keyframes matchGlow{0%{transform:scale(1)rotate(0);filter:drop-shadow(0 0 0 transparent)}30%{transform:scale(1.55)rotate(-10deg);filter:drop-shadow(0 0 16px var(--pink))}60%{transform:scale(1.45)rotate(10deg);filter:drop-shadow(0 0 22px var(--cyan))}100%{transform:scale(1)rotate(0);filter:drop-shadow(0 0 10px var(--mint))}}

.a-roar     {animation:roar      .70s ease}
.a-bark     {animation:bark      .60s ease}
.a-scratch  {animation:scratch   .65s ease}
.a-gallop   {animation:gallop    .65s ease}
.a-jump     {animation:jump      .60s ease}
.a-shake    {animation:shakean   .55s ease}
.a-sneak    {animation:sneak     .65s ease}
.a-bounce   {animation:bouncean  .65s ease}
.a-fly      {animation:fly       .70s ease}
.a-spin     {animation:spin      .60s ease}
.a-flap     {animation:flap      .60s ease}
.a-stomp    {animation:stomp     .60s ease}
.a-stretch  {animation:stretcha  .65s ease}
.a-snap     {animation:snapan    .55s ease}
.a-waddle   {animation:waddle    .70s ease}
.a-fish     {animation:fishJ     .75s cubic-bezier(.36,1.5,.64,1)}
.a-butterfly{animation:butterfly  .80s ease}
.a-match    {animation:matchGlow  .70s ease forwards}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VFX PARTÃCULAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.vdrop{position:fixed;z-index:9999;pointer-events:none;font-size:.9rem;transform:translate(-50%,-50%);animation:dropFly .65s ease-out forwards}
@keyframes dropFly{0%{transform:translate(-50%,-50%) scale(1);opacity:1}70%{opacity:1}100%{transform:translate(calc(-50% + var(--tx)),calc(-50% + var(--ty))) scale(.3);opacity:0}}
.vspark{position:fixed;z-index:9999;pointer-events:none;transform:translate(-50%,-50%);animation:sparkFly .75s ease-out forwards}
@keyframes sparkFly{0%{transform:translate(-50%,-50%) scale(0) rotate(0deg);opacity:1}50%{opacity:1;transform:translate(calc(-50% + var(--tx)*.6),calc(-50% + var(--ty)*.6)) scale(1.5) rotate(180deg)}100%{transform:translate(calc(-50% + var(--tx)),calc(-50% + var(--ty))) scale(0) rotate(360deg);opacity:0}}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TELA DE RESULTADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.result-wrap{
  display:flex;flex-direction:column;align-items:center;
  width:100%;padding:28px 20px;text-align:center;gap:14px;
  max-width:480px;
}
.rtrophy{
  font-size:clamp(3.5rem,18vw,6.5rem);
  animation:trophyBounce 1.4s ease-in-out infinite;
  filter:drop-shadow(0 0 30px rgba(255,215,0,.5));
}
@keyframes trophyBounce{0%,100%{transform:scale(1) rotate(-4deg)}50%{transform:scale(1.12) rotate(4deg)}}
.rtitle{font-family:var(--fh);font-size:clamp(1.9rem,9vw,2.8rem);color:var(--gold)}
.rmsg  {color:rgba(255,255,255,.65);font-size:clamp(.88rem,3.8vw,1rem)}
.rstars{font-size:clamp(2rem,9vw,2.8rem);letter-spacing:8px;animation:starsShine 1.5s ease-in-out infinite}
@keyframes starsShine{0%,100%{filter:drop-shadow(0 0 6px #ffd700)}50%{filter:drop-shadow(0 0 20px #ffd700) drop-shadow(0 0 40px rgba(255,215,0,.5))}}
.rcoins{
  background:rgba(255,215,0,.1);border:1.5px solid rgba(255,215,0,.3);
  border-radius:40px;padding:8px 22px;
  font-family:var(--fh);font-size:clamp(.92rem,4vw,1.1rem);color:var(--gold);
}
.rbtns{display:flex;flex-direction:column;gap:10px;width:100%}
.btn-again{
  background:linear-gradient(135deg,#ff6eb4,#c77dff);border:none;
  border-radius:16px;font-family:var(--fh);font-size:clamp(1rem,4.2vw,1.18rem);
  color:#fff;height:clamp(52px,14vw,68px);
  cursor:pointer;touch-action:manipulation;
  box-shadow:0 6px 24px rgba(255,110,180,.4);transition:transform .12s;
}
.btn-again:active{transform:scale(.95)}
.btn-menu{
  background:rgba(255,255,255,.1);border:1.5px solid rgba(255,255,255,.2);
  border-radius:16px;height:clamp(48px,13vw,62px);
  font-family:var(--fh);font-size:clamp(.95rem,4vw,1.1rem);
  color:#fff;cursor:pointer;touch-action:manipulation;transition:transform .12s;
}
.btn-menu:active{transform:scale(.95)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFETTI & UTILS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.confetti{
  position:fixed;pointer-events:none;z-index:9999;font-size:1.4rem;
  animation:cFall var(--dur) ease-in forwards var(--del);
}
@keyframes cFall{from{transform:translateY(-50px) rotate(0deg);opacity:1}to{transform:translateY(110dvh) rotate(900deg);opacity:0}}
.hidden{display:none!important}
</style>
</head>
<body>
<!-- UNIVERSO -->
<div id="universe">
  <div class="aurora aurora1"></div>
  <div class="aurora aurora2"></div>
  <div class="tree-row"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MENU â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen on" id="sMenu">
  <div class="menu-scroll">
    <div class="logo-area">
      <span class="logo-moon">ğŸŒ™</span>
      <h1 class="logo-title">Mundo<br/>MÃ¡gico</h1>
      <div class="logo-stars-deco">
        <span style="--sf:2.1s;--sd:0s">âœ¨</span>
        <span style="--sf:1.8s;--sd:-.4s">ğŸŒŸ</span>
        <span style="--sf:2.3s;--sd:-.8s">â­</span>
        <span style="--sf:1.9s;--sd:-1.2s">ğŸŒŸ</span>
        <span style="--sf:2.0s;--sd:-.6s">âœ¨</span>
      </div>
      <p class="logo-sub">Vamos aprender brincando! ğŸ‰</p>
    </div>

    <div class="game-grid">
      <button class="game-card gc1" id="btnA">
        <div class="card-icon">ğŸ”¤</div>
        <div class="card-name">Jogo do<br/>Alfabeto</div>
        <div class="card-desc">Encontre a letra certa!</div>
        <div class="card-stars" id="stA">â˜†â˜†â˜†</div>
      </button>
      <button class="game-card gc2" id="btnM">
        <div class="card-icon">ğŸ§ </div>
        <div class="card-name">Jogo da<br/>MemÃ³ria</div>
        <div class="card-desc">Ache os animais iguais!</div>
        <div class="card-stars" id="stM">â˜†â˜†â˜†</div>
      </button>
    </div>

    <button class="game-card gc3 full" id="btnZ">
      <div class="card-icon">ğŸŒ¿</div>
      <div class="card-text">
        <div class="card-name">Labirinto MÃ¡gico</div>
        <div class="card-desc">Encontre a estrela com dicas! ğŸ’¡</div>
      </div>
      <div class="card-stars" id="stZ">â˜†â˜†â˜†</div>
    </button>

    <div class="coins-row">
      <span>ğŸª™</span>
      <span class="coins-label"><strong id="totalCoins">0</strong> moedas</span>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ALFABETO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="sAlpha">
  <div class="hdr" id="hdrA">
    <button class="hbtn" onclick="goHome()">ğŸ </button>
    <div class="hud">
      <div class="pill">â­ <strong id="aScore">0</strong></div>
      <div class="pill"><span id="aLives">â¤ï¸â¤ï¸â¤ï¸</span></div>
      <div class="pill">ğŸ”¤ <strong id="aCur">1</strong>/<strong id="aTotal">10</strong></div>
    </div>
    <button class="hbtn" onclick="initAlpha()">ğŸ”„</button>
  </div>
  <div class="alpha-body">
    <div class="pbar-wrap"><div class="pbar-fill" id="aProgress" style="width:0%"></div></div>
    <div class="acard" id="aCard">
      <span class="aemoji" id="aEmoji">ğŸ¦</span>
      <div class="aword"  id="aWord">LEÃƒO</div>
      <div class="ahint"  id="aHint">ComeÃ§a com que letrinha? ğŸ¤”</div>
    </div>
    <div class="aquestion">Qual Ã© a primeira letrinha? ğŸ‘‡</div>
    <div class="aopts" id="aOpts"></div>
    <div class="afb hidden" id="aFb"></div>
    <button class="btn-next hidden" id="btnNext">PrÃ³xima âœ</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MEMÃ“RIA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="sMemory">
  <div class="hdr" id="hdrM">
    <button class="hbtn" onclick="goHome()">ğŸ </button>
    <div class="hud">
      <div class="pill">ğŸ”„ <strong id="mMov">0</strong></div>
      <div class="pill">âœ… <strong id="mPairs">0</strong>/<strong id="mTotal">6</strong></div>
      <div class="pill">â± <strong id="mTimer">0</strong>s</div>
    </div>
    <button class="hbtn" onclick="initMemory()">ğŸ”„</button>
  </div>
  <div class="diffbar" id="diffbar">
    <button class="dbtn on" onclick="setDiff(6,this)">ğŸ˜Š FÃ¡cil</button>
    <button class="dbtn"   onclick="setDiff(8,this)">ğŸ˜ MÃ©dio</button>
    <button class="dbtn"   onclick="setDiff(12,this)">ğŸ”¥ DifÃ­cil</button>
  </div>
  <div class="mgrid" id="mgrid"></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LABIRINTO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="sMaze">
  <div class="hdr">
    <button class="hbtn" onclick="goHome()">ğŸ </button>
    <div class="hud">
      <div class="pill">ğŸ† NÃ­vel <strong id="mzLvl">1</strong></div>
      <div class="pill">ğŸ‘£ <strong id="mzSteps">0</strong></div>
    </div>
    <button class="hbtn" onclick="initMaze(true)">ğŸ”„</button>
  </div>
  <div class="game-body" id="mazebody">
    <div class="maze-topbar">
      <span class="maze-lvlname" id="mzName">ğŸŒ¿ Floresta FÃ¡cil</span>
      <button class="hint-btn" id="hintBtn" onclick="useHint()">
        ğŸ’¡ Dica!
        <div class="hint-dots" id="hintDots">
          <div class="hdot" id="hd0"></div>
          <div class="hdot" id="hd1"></div>
          <div class="hdot" id="hd2"></div>
        </div>
      </button>
    </div>
    <div class="maze-wrap" id="mzwrap"><canvas id="mc"></canvas></div>
    <div class="maze-pad">
      <button class="dpad" id="dUp"   onclick="mv(0,-1)">â¬†ï¸</button>
      <button class="dpad" id="dLf"   onclick="mv(-1,0)">â¬…ï¸</button>
      <div    class="dpad" id="dCn">ğŸ¾</div>
      <button class="dpad" id="dRt"   onclick="mv(1,0)">â¡ï¸</button>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• RESULTADO â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="screen" id="sResult">
  <div class="result-wrap">
    <div class="rtrophy" id="rTrophy">ğŸ†</div>
    <h2 class="rtitle"   id="rTitle">ParabÃ©ns!</h2>
    <p  class="rmsg"     id="rMsg">VocÃª Ã© incrÃ­vel!</p>
    <div class="rstars"  id="rStars">â­â­â­</div>
    <div class="rcoins"  id="rCoins">ğŸª™ +30 moedas</div>
    <div class="rbtns">
      <button class="btn-again" id="btnAgain">Jogar de novo ğŸ”„</button>
      <button class="btn-menu"  onclick="goHome()">ğŸ  Menu</button>
    </div>
  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const ALPHA=[
  {l:'A',e:'ğŸ',w:'Abacaxi'   },{l:'B',e:'ğŸˆ',w:'Bola'     },{l:'C',e:'ğŸ±',w:'Gato'      },
  {l:'D',e:'ğŸ¶',w:'Cachorro'  },{l:'E',e:'â­',w:'Estrela'  },{l:'F',e:'ğŸŒ¸',w:'Flor'       },
  {l:'G',e:'ğŸ¦’',w:'Girafa'    },{l:'H',e:'ğŸ ',w:'Casa'     },{l:'I',e:'ğŸŒˆ',w:'Arco-Ã­ris'  },
  {l:'J',e:'ğŸ',w:'Joaninha'  },{l:'K',e:'ğŸ¥',w:'Kiwi'     },{l:'L',e:'ğŸ¦',w:'LeÃ£o'       },
  {l:'M',e:'ğŸ’',w:'Macaco'    },{l:'N',e:'â˜ï¸',w:'Nuvem'    },{l:'O',e:'ğŸ»',w:'Urso'       },
  {l:'P',e:'ğŸ¦œ',w:'Papagaio'  },{l:'Q',e:'ğŸ§€',w:'Queijo'   },{l:'R',e:'ğŸ¸',w:'RÃ£'         },
  {l:'S',e:'ğŸ',w:'Cobra'     },{l:'T',e:'ğŸ¢',w:'Tartaruga'},{l:'U',e:'ğŸ‡',w:'Uva'         },
  {l:'V',e:'ğŸ¦‹',w:'Borboleta' },{l:'W',e:'ğŸŒŠ',w:'Onda'     },{l:'X',e:'ğŸ¸',w:'ViolÃ£o'      },
  {l:'Y',e:'ğŸ§˜',w:'Yoga'      },{l:'Z',e:'ğŸ¦“',w:'Zebra'    },
];
const MCARDS=[
  {e:'ğŸ¦',a:'a-roar',   s:'RAUUU!'  },{e:'ğŸ¯',a:'a-roar',  s:'RRRR!'  },
  {e:'ğŸ±',a:'a-scratch',s:'MIAU!'   },{e:'ğŸ¶',a:'a-bark',  s:'AU AU!' },
  {e:'ğŸº',a:'a-sneak',  s:'AUUUU!'  },{e:'ğŸ¦Š',a:'a-sneak', s:'ACHUU!' },
  {e:'ğŸ´',a:'a-gallop', s:'HIIII!'  },{e:'ğŸ¦„',a:'a-spin',  s:'MAGIA!' },
  {e:'ğŸ˜',a:'a-stomp',  s:'BRRR!'   },{e:'ğŸ¦’',a:'a-stretch',s:'OOH!'  },
  {e:'ğŸ’',a:'a-bounce', s:'UU-AA!'  },{e:'ğŸ¸',a:'a-jump',  s:'CROAC!' },
  {e:'ğŸ¦‹',a:'a-butterfly',s:'FLUTTER!',fx:'bf'},{e:'ğŸ ',a:'a-fish',s:'BLUB!',fx:'fish'},
  {e:'ğŸ§',a:'a-waddle', s:'SQUAWK!' },{e:'ğŸ¦…',a:'a-fly',   s:'SCREECH!'},
  {e:'ğŸ¢',a:'a-stretch',s:'HMM...'  },{e:'ğŸŠ',a:'a-snap',  s:'SNAP!'  },
  {e:'ğŸ¦ˆ',a:'a-fish',   s:'CHOMP!',fx:'fish'},{e:'ğŸ¦œ',a:'a-flap',s:'SQUAWK!'},
  {e:'ğŸ»',a:'a-roar',   s:'GRRRR!'  },{e:'ğŸ¼',a:'a-bounce',s:'UHU!'   },
  {e:'ğŸ¦“',a:'a-gallop', s:'HIRRR!'  },{e:'ğŸ¬',a:'a-fish',  s:'EEE-EEE!',fx:'fish'},
  {e:'ğŸ™',a:'a-spin',   s:'SPLASH!' },{e:'ğŸ¦”',a:'a-shake', s:'EEK!'   },
  {e:'ğŸ¦˜',a:'a-jump',   s:'BOING!'  },{e:'ğŸ°',a:'a-jump',  s:'HOP!'   },
  {e:'ğŸ¦‰',a:'a-spin',   s:'UHUU!'   },{e:'ğŸ¦š',a:'a-spin',  s:'HONK!'  },
];
const ALLANIMS=['a-roar','a-bark','a-scratch','a-gallop','a-jump','a-shake','a-sneak',
  'a-bounce','a-fly','a-spin','a-flap','a-stomp','a-stretch','a-snap','a-waddle',
  'a-fish','a-butterfly','a-match'];
const MAZE_LEVELS=[
  {name:'ğŸŒ¿ Floresta FÃ¡cil',   s:7,  max:30, emoji:'ğŸŒ¿'},
  {name:'ğŸ–ï¸ Praia Divertida', s:9,  max:50, emoji:'ğŸ–ï¸'},
  {name:'ğŸ”ï¸ Montanha Aventura',s:11, max:75, emoji:'ğŸ”ï¸'},
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UTILITÃRIOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let _coins=+(localStorage.getItem('mw_coins')||0);
let _curGame=null;

const $=id=>document.getElementById(id);
const shuffle=a=>{const r=[...a];for(let i=r.length-1;i>0;i--){const j=0|Math.random()*(i+1);[r[i],r[j]]=[r[j],r[i]]}return r};
const starsStr=n=>{n=Math.max(0,Math.min(3,n));return'â˜…'.repeat(n)+'â˜†'.repeat(3-n)};
const saveStars=(k,n)=>{const o=+(localStorage.getItem(k)||0);if(n>o)localStorage.setItem(k,n)};
const getStars=k=>+(localStorage.getItem(k)||0);
const addCoins=n=>{_coins+=n;localStorage.setItem('mw_coins',_coins)};
const showScreen=id=>{document.querySelectorAll('.screen').forEach(s=>s.classList.remove('on'));$(id).classList.add('on')};

function goHome(){
  clearInterval(_mTim);
  showScreen('sMenu');
  $('stA').textContent=starsStr(getStars('mw_a'));
  $('stM').textContent=starsStr(getStars('mw_m'));
  $('stZ').textContent=starsStr(getStars('mw_z'));
  $('totalCoins').textContent=_coins;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FUNDO ESTRELAS GERADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(()=>{
  const u=$('universe');
  for(let i=0;i<80;i++){
    const d=document.createElement('div');d.className='star';
    const sz=Math.random()*2.5+.5;
    d.style.cssText=`width:${sz}px;height:${sz}px;top:${Math.random()*90}%;left:${Math.random()*100}%;--td:${(Math.random()*3+1.5).toFixed(1)}s;--dd:${-(Math.random()*4).toFixed(1)}s`;
    u.appendChild(d);
  }
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFETTI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function rain(n=30){
  const p=['â­','ğŸŒŸ','ğŸ‰','ğŸŠ','âœ¨','ğŸ’›','ğŸ’–','ğŸŒˆ','ğŸˆ','ğŸª™','ğŸ’«','ğŸ¦‹','ğŸŒ¸','ğŸ€'];
  for(let i=0;i<n;i++){
    const el=document.createElement('div');
    el.className='confetti';
    el.textContent=p[0|Math.random()*p.length];
    el.style.cssText=`--dur:${(Math.random()*1.8+.8).toFixed(1)}s;--del:${(Math.random()*.9).toFixed(1)}s;left:${(Math.random()*100).toFixed(0)}vw;top:-50px`;
    document.body.appendChild(el);
    el.addEventListener('animationend',()=>el.remove());
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VFX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function spawnDrops(cx,cy){
  ['ğŸ’§','ğŸ’¦','ğŸ«§','ğŸ’§','ğŸ’¦','ğŸ«§','ğŸ’§','ğŸ’¦'].forEach((d,i)=>{
    const el=document.createElement('div');el.className='vdrop';el.textContent=d;
    const a=(i/8)*Math.PI*2,r=35+Math.random()*25;
    el.style.cssText=`--tx:${(Math.cos(a)*r).toFixed(0)}px;--ty:${(Math.sin(a)*r-16).toFixed(0)}px;left:${cx}px;top:${cy}px;animation-delay:${(i*.04).toFixed(2)}s`;
    document.body.appendChild(el);el.addEventListener('animationend',()=>el.remove());
  });
}
function spawnSparks(cx,cy){
  ['âœ¨','â­','ğŸŒŸ','ğŸ’«','âœ¨','â­','ğŸŒŸ','ğŸ’«','âœ¨','â­'].forEach((s,i)=>{
    const el=document.createElement('div');el.className='vspark';el.textContent=s;
    const a=(i/10)*Math.PI*2,r=28+Math.random()*36;
    el.style.cssText=`--tx:${(Math.cos(a)*r).toFixed(0)}px;--ty:${(Math.sin(a)*r).toFixed(0)}px;left:${cx}px;top:${cy}px;font-size:${(9+Math.random()*11).toFixed(0)}px;animation-delay:${(i*.04).toFixed(2)}s`;
    document.body.appendChild(el);el.addEventListener('animationend',()=>el.remove());
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESULTADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showResult(game,sn,coins,trophy,title,msg){
  _curGame=game;
  $('rTrophy').textContent=trophy;
  $('rTitle').textContent=title;
  $('rMsg').textContent=msg;
  $('rStars').textContent=starsStr(sn);
  $('rCoins').textContent=`ğŸª™ +${coins} moedas`;
  addCoins(coins);
  $('btnAgain').onclick=()=>{
    if(game==='a'){showScreen('sAlpha');initAlpha()}
    if(game==='m'){showScreen('sMemory');initMemory()}
    if(game==='z'){showScreen('sMaze');initMaze(true)}
  };
  showScreen('sResult');rain(55);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   JOGO DO ALFABETO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let _aq=[],_ai=0,_as=0,_al=3,_aok=false;

function initAlpha(){
  _aq=shuffle(ALPHA).slice(0,10);_ai=0;_as=0;_al=3;_aok=false;
  $('aFb').classList.add('hidden');$('btnNext').classList.add('hidden');
  loadAQ();
}

function loadAQ(){
  _aok=false;
  const q=_aq[_ai];
  const card=$('aCard');card.style.animation='none';void card.offsetWidth;card.style.animation='';
  $('aEmoji').textContent=q.e;
  $('aWord').textContent=q.w.toUpperCase();
  $('aHint').textContent=`"${q.w}" comeÃ§a com a letrinha... ğŸ¤”`;
  $('aCur').textContent=_ai+1;
  $('aTotal').textContent=_aq.length;
  $('aScore').textContent=_as;
  $('aLives').textContent=_al>0?'â¤ï¸'.repeat(_al):'ğŸ’”';
  $('aProgress').style.width=(_ai/_aq.length*100)+'%';
  const wrong=shuffle(ALPHA.map(d=>d.l).filter(l=>l!==q.l)).slice(0,3);
  const opts=shuffle([q.l,...wrong]);
  const c=$('aOpts');c.innerHTML='';
  opts.forEach(lt=>{
    const b=document.createElement('button');
    b.className='obtn';b.textContent=lt;
    b.addEventListener('click',()=>checkA(b,lt,q.l));
    c.appendChild(b);
  });
  $('aFb').classList.add('hidden');
  $('btnNext').classList.add('hidden');
  $('btnNext').textContent=_ai===_aq.length-1?'Ver resultado ğŸ†':'PrÃ³xima âœ';
}

function checkA(btn,chosen,correct){
  if(_aok)return;_aok=true;
  document.querySelectorAll('.obtn').forEach(b=>b.disabled=true);
  const fb=$('aFb');
  if(chosen===correct){
    btn.classList.add('hit');_as+=10;rain(18);
    fb.textContent='ğŸ‰ Isso mesmo! Que esperto(a)! âœ¨';
    fb.className='afb ok';
  }else{
    btn.classList.add('miss');_al=Math.max(0,_al-1);
    document.querySelectorAll('.obtn').forEach(b=>{if(b.textContent===correct)b.classList.add('hit')});
    fb.textContent=`ğŸ˜… Quase! Era a letra "${correct}"! VocÃª vai conseguir! ğŸ’ª`;
    fb.className='afb err';
    if(_al===0){
      $('aLives').textContent='ğŸ’”';
      fb.classList.remove('hidden');
      setTimeout(()=>{finishAlpha()},1600);return;
    }
  }
  $('aLives').textContent=_al>0?'â¤ï¸'.repeat(_al):'ğŸ’”';
  fb.classList.remove('hidden');
  $('btnNext').classList.remove('hidden');
}

function finishAlpha(){
  const pct=_as/(_aq.length*10)*100;
  const sn=pct===100?3:pct>=70?2:pct>=40?1:0;
  saveStars('mw_a',sn);
  $('aProgress').style.width='100%';
  const coins=sn===3?30:sn===2?20:sn===1?10:5;
  const trophy=sn===3?'ğŸ†':sn===2?'ğŸ¥ˆ':'ğŸ¥‰';
  const title=sn===3?'Perfeito! ğŸŒŸ':sn>=1?'Muito bem! ğŸ˜Š':'Continue tentando! ğŸ’ª';
  showResult('a',sn,coins,trophy,title,`VocÃª fez ${_as} de ${_aq.length*10} pontos!`);
}

$('btnNext').addEventListener('click',()=>{
  _ai++;
  if(_ai<_aq.length)loadAQ();
  else finishAlpha();
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   JOGO DA MEMÃ“RIA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let _mp=6,_mm=0,_mMat=0,_mFl=[],_mLk=false,_mT=0,_mTim=null;

function setDiff(n,btn){
  _mp=n;
  document.querySelectorAll('.dbtn').forEach(b=>b.classList.remove('on'));
  btn.classList.add('on');initMemory();
}

function initMemory(){
  clearInterval(_mTim);
  _mm=0;_mMat=0;_mFl=[];_mLk=false;_mT=0;
  $('mMov').textContent=0;$('mPairs').textContent=0;$('mTimer').textContent=0;$('mTotal').textContent=_mp;
  const g=$('mgrid');g.innerHTML='';g.removeAttribute('style');

  requestAnimationFrame(()=>{
    const cols=_mp<=6?3:4;
    const rows=Math.ceil(_mp*2/cols);
    const GAP=7,PAD=10;
    const hH=$('hdrM').offsetHeight||52;
    const dH=$('diffbar').offsetHeight||38;
    const aH=window.innerHeight-hH-dH-PAD-GAP*(rows-1);
    const aW=window.innerWidth-PAD*2-GAP*(cols-1);
    const cell=Math.max(44,Math.min(Math.floor(aH/rows),Math.floor(aW/cols)));

    g.style.cssText=`display:grid;grid-template-columns:repeat(${cols},${cell}px);grid-template-rows:repeat(${rows},${cell}px);gap:${GAP}px;padding:0 ${PAD}px ${PAD}px;justify-content:center;align-content:start`;

    const sel=shuffle(MCARDS).slice(0,_mp);
    const pairs=shuffle([...sel,...sel.map(c=>({...c}))]);
    pairs.forEach(cd=>{
      const card=document.createElement('div');
      card.className='mc';card.style.cssText=`width:${cell}px;height:${cell}px`;
      card.dataset.e=cd.e;card.dataset.a=cd.a;card.dataset.s=cd.s;card.dataset.fx=cd.fx||'';
      const cv=document.createElement('canvas');cv.className='mcc';drawEmoji(cv,cd.e,cell);
      card.innerHTML=`<div class="mci">
        <div class="mcf"><div class="mcq">â­</div></div>
        <div class="mcb">
          <span class="mclb hidden">${cd.s}</span>
          <span class="mcface hidden"></span>
        </div></div>`;
      card.querySelector('.mcb').prepend(cv);
      card.addEventListener('click',()=>flipCard(card));
      g.appendChild(card);
    });

    _mTim=setInterval(()=>{_mT++;$('mTimer').textContent=_mT},1000);
  });
}

function flipCard(card){
  if(_mLk||card.classList.contains('fp')||card.classList.contains('mp'))return;
  if(_mFl.length>=2)return;
  card.classList.add('fp');_mFl.push(card);
  setTimeout(()=>{
    animMC(card);
    const r=card.getBoundingClientRect();
    const cx=r.left+r.width/2,cy=r.top+r.height/2;
    if(card.dataset.fx==='fish')spawnDrops(cx,cy);
    if(card.dataset.fx==='bf')spawnSparks(cx,cy);
  },240);
  if(_mFl.length===2){
    _mm++;$('mMov').textContent=_mm;_mLk=true;
    const[a,b]=_mFl;
    if(a.dataset.e===b.dataset.e){
      setTimeout(()=>{
        a.classList.add('mp');b.classList.add('mp');
        setFace(a,'hpy');setFace(b,'hpy');
        glowMC(a);glowMC(b);rain(14);
        _mMat++;$('mPairs').textContent=_mMat;
        _mFl=[];_mLk=false;
        if(_mMat===_mp){
          clearInterval(_mTim);
          setTimeout(()=>{
            const ratio=_mm/_mp;
            const sn=ratio<=1.5?3:ratio<=2.5?2:1;
            saveStars('mw_m',sn);
            const coins=sn===3?30:sn===2?20:10;
            showResult('m',sn,coins,
              sn===3?'ğŸ†':sn===2?'ğŸ¥ˆ':'ğŸ¥‰',
              sn===3?'MemÃ³ria perfeita! ğŸ§ ':sn===2?'Muito bem! ğŸ‘':'Conseguiu! ğŸ‰',
              `${_mm} jogadas em ${_mT}s!`);
          },900);
        }
      },350);
    }else{
      setTimeout(()=>{
        setFace(a,'sad');setFace(b,'sad');
        a.classList.add('mx');b.classList.add('mx');
        setTimeout(()=>{
          hideFace(a);hideFace(b);
          a.classList.remove('fp','mx');b.classList.remove('fp','mx');
          resetMC(a);resetMC(b);_mFl=[];_mLk=false;
        },950);
      },500);
    }
  }
}

function drawEmoji(cv,emoji,size){
  const dpr=window.devicePixelRatio||1;
  const px=Math.round(size*dpr);
  cv.width=px;cv.height=px;cv.style.width=size+'px';cv.style.height=size+'px';
  const ctx=cv.getContext('2d');
  ctx.clearRect(0,0,px,px);
  ctx.textBaseline='middle';ctx.textAlign='center';
  let fs=Math.round(px*.88);
  for(let i=0;i<5;i++){
    ctx.font=`${fs}px serif`;
    const m=ctx.measureText(emoji);
    const w=(m.actualBoundingBoxLeft||0)+(m.actualBoundingBoxRight||0)||m.width;
    const h=(m.actualBoundingBoxAscent||0)+(m.actualBoundingBoxDescent||0)||fs;
    if(w<=0||h<=0)break;
    const sc=Math.min((px*.9)/w,(px*.9)/h);
    if(Math.abs(sc-1)<.02)break;
    fs=Math.round(fs*sc);
  }
  ctx.font=`${Math.max(10,fs)}px serif`;
  ctx.fillText(emoji,px/2,px/2);
}

function animMC(card){
  const cv=card.querySelector('.mcc');if(!cv)return;
  cv.classList.remove(...ALLANIMS);void cv.offsetWidth;cv.classList.add(card.dataset.a);
  const lb=card.querySelector('.mclb');
  lb.textContent=card.dataset.s;lb.classList.remove('hidden');
  clearTimeout(card._lt);card._lt=setTimeout(()=>lb.classList.add('hidden'),1500);
}
function resetMC(card){
  const cv=card.querySelector('.mcc');if(cv)cv.classList.remove(...ALLANIMS);
  const lb=card.querySelector('.mclb');if(lb)lb.classList.add('hidden');
}
function glowMC(card){
  const cv=card.querySelector('.mcc');if(!cv)return;
  cv.classList.remove(...ALLANIMS);void cv.offsetWidth;cv.classList.add('a-match');
}
function setFace(card,t){
  const f=card.querySelector('.mcface');if(!f)return;
  f.textContent=t==='hpy'?'ğŸ˜„':'ğŸ˜¢';f.className=`mcface ${t}`;
}
function hideFace(card){const f=card.querySelector('.mcface');if(f)f.className='mcface hidden'}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LABIRINTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let _mzLv=0,_mzGrid=[],_mzSize=7,_px=1,_py=1,_ex=1,_ey=1,_mzSteps=0;
let _hints=[],_hintIdx=0,_hintUsed=0,_hintMax=3,_hintActive=false;
let _mzAnimate=null,_mzFinished=false;

function initMaze(reset=false){
  if(reset)_mzLv=0;
  _mzSteps=0;_hintUsed=0;_hintIdx=0;_hints=[];_hintActive=false;_mzFinished=false;
  $('mzLvl').textContent=_mzLv+1;
  $('mzSteps').textContent=0;
  const lv=MAZE_LEVELS[_mzLv];
  $('mzName').textContent=lv.name;
  _mzSize=lv.s;
  // reset hint dots
  for(let i=0;i<3;i++){$('hd'+i).classList.remove('used')}
  $('hintBtn').style.opacity='1';
  $('hintBtn').style.pointerEvents='auto';
  genMaze(_mzSize);
  requestAnimationFrame(()=>{drawMaze()});
}

function genMaze(sz){
  const s=sz%2===0?sz+1:sz;
  _mzGrid=Array.from({length:s},()=>Array(s).fill(1));
  function carve(x,y){
    _mzGrid[y][x]=0;
    shuffle([[0,-2],[2,0],[0,2],[-2,0]]).forEach(([dx,dy])=>{
      const nx=x+dx,ny=y+dy;
      if(ny>0&&ny<s-1&&nx>0&&nx<s-1&&_mzGrid[ny][nx]===1){
        _mzGrid[y+dy/2][x+dx/2]=0;carve(nx,ny);
      }
    });
  }
  carve(1,1);_px=1;_py=1;
  _ex=s-2;_ey=s-2;_mzGrid[_ey][_ex]=0;
  _mzSize=s;
}

function solveMaze(){
  const s=_mzSize;
  const q=[[_px,_py,[[_px,_py]]]];
  const vis=new Set([`${_px},${_py}`]);
  while(q.length){
    const[x,y,path]=q.shift();
    if(x===_ex&&y===_ey)return path;
    [[0,-1],[1,0],[0,1],[-1,0]].forEach(([dx,dy])=>{
      const nx=x+dx,ny=y+dy;
      if(ny>=0&&ny<s&&nx>=0&&nx<s&&_mzGrid[ny][nx]===0&&!vis.has(`${nx},${ny}`)){
        vis.add(`${nx},${ny}`);q.push([nx,ny,[...path,[nx,ny]]]);
      }
    });
  }
  return[];
}

function useHint(){
  if(_hintUsed>=_hintMax)return;
  // Resolve caminho atual e mostra os prÃ³ximos 3~5 passos
  _hints=solveMaze();
  _hintActive=true;
  _hintIdx=Math.min(4,_hints.length-1); // mostra 4 passos Ã  frente
  $('hd'+_hintUsed).classList.add('used');
  _hintUsed++;
  if(_hintUsed>=_hintMax){
    $('hintBtn').style.opacity='.45';
    $('hintBtn').style.pointerEvents='none';
  }
  drawMaze();
  // Apaga dica apÃ³s 3 segundos
  clearTimeout(window._hintTO);
  window._hintTO=setTimeout(()=>{_hintActive=false;drawMaze()},3500);
}

function drawMaze(){
  const cv=$('mc'),wrap=$('mzwrap'),body=$('mazebody');
  const lv=MAZE_LEVELS[_mzLv];
  const s=_mzSize;
  const dpr=window.devicePixelRatio||1;

  // Calcula tamanho disponÃ­vel
  const hH=$('sMaze').querySelector('.hdr').offsetHeight||52;
  const topH=body.querySelector('.maze-topbar').offsetHeight||38;
  const padH=body.querySelector('.maze-pad').offsetHeight||160;
  const gapH=7*3;const extraH=14;
  const maxSz=Math.min(
    window.innerWidth-20,
    window.innerHeight-hH-topH-padH-gapH-extraH
  );
  const cell=Math.max(18,Math.floor(maxSz/s));
  const total=cell*s;

  cv.width=total*dpr;cv.height=total*dpr;
  cv.style.width=total+'px';cv.style.height=total+'px';
  wrap.style.width=total+'px';wrap.style.height=total+'px';

  const ctx=cv.getContext('2d');
  ctx.scale(dpr,dpr);

  // Fundo
  ctx.fillStyle='#080f22';
  ctx.fillRect(0,0,total,total);

  // Caminho da dica
  if(_hintActive&&_hints.length>1){
    const steps=_hints.slice(1,Math.min(_hintIdx+1,_hints.length));
    steps.forEach(([hx,hy],i)=>{
      const alpha=0.8*(1-i/steps.length);
      // Pulso animado
      ctx.save();
      ctx.globalAlpha=alpha;
      const grd=ctx.createRadialGradient(hx*cell+cell/2,hy*cell+cell/2,0,hx*cell+cell/2,hy*cell+cell/2,cell*.45);
      grd.addColorStop(0,'#ffd700');grd.addColorStop(1,'rgba(255,215,0,0)');
      ctx.fillStyle=grd;
      ctx.beginPath();ctx.arc(hx*cell+cell/2,hy*cell+cell/2,cell*.45,0,Math.PI*2);ctx.fill();
      // Seta de direÃ§Ã£o
      if(i<steps.length-1){
        const[nx,ny]=steps[i+1]||[hx,hy];
        const dx=(nx-hx),dy=(ny-hy);
        if(dx!==0||dy!==0){
          ctx.globalAlpha=alpha*.9;
          ctx.fillStyle='#fff';
          ctx.font=`bold ${Math.round(cell*.55)}px serif`;
          ctx.textAlign='center';ctx.textBaseline='middle';
          const arrow=dx>0?'â†’':dx<0?'â†':dy>0?'â†“':'â†‘';
          ctx.fillText(arrow,hx*cell+cell/2,hy*cell+cell/2);
        }
      }
      ctx.restore();
    });
  }

  // CÃ©lulas
  for(let y=0;y<s;y++){
    for(let x=0;x<s;x++){
      if(_mzGrid[y][x]===1){
        // Parede com textura
        const grd=ctx.createLinearGradient(x*cell,y*cell,(x+1)*cell,(y+1)*cell);
        grd.addColorStop(0,'#1a2a5e');grd.addColorStop(1,'#0f1f44');
        ctx.fillStyle=grd;
        ctx.beginPath();
        if(ctx.roundRect){ctx.roundRect(x*cell+.5,y*cell+.5,cell-1,cell-1,2)}
        else{ctx.rect(x*cell+.5,y*cell+.5,cell-1,cell-1)}
        ctx.fill();
        // Contorno suave
        ctx.strokeStyle='rgba(100,120,255,0.1)';ctx.lineWidth=.5;ctx.stroke();
      }else{
        ctx.fillStyle='#0b1530';
        ctx.fillRect(x*cell,y*cell,cell,cell);
      }
    }
  }

  // Grade de pontinhos no chÃ£o
  ctx.fillStyle='rgba(255,255,255,.04)';
  for(let y=0;y<s;y++){
    for(let x=0;x<s;x++){
      if(_mzGrid[y][x]===0){
        ctx.beginPath();
        ctx.arc(x*cell+cell/2,y*cell+cell/2,1,0,Math.PI*2);
        ctx.fill();
      }
    }
  }

  // SaÃ­da com brilho
  ctx.save();
  const grdExit=ctx.createRadialGradient(_ex*cell+cell/2,_ey*cell+cell/2,0,_ex*cell+cell/2,_ey*cell+cell/2,cell*.6);
  grdExit.addColorStop(0,'rgba(255,215,0,.4)');grdExit.addColorStop(1,'transparent');
  ctx.fillStyle=grdExit;
  ctx.beginPath();ctx.arc(_ex*cell+cell/2,_ey*cell+cell/2,cell*.6,0,Math.PI*2);ctx.fill();
  ctx.font=`${Math.round(cell*.72)}px serif`;ctx.textAlign='center';ctx.textBaseline='middle';
  ctx.fillText('ğŸŒŸ',_ex*cell+cell/2,_ey*cell+cell/2);
  ctx.restore();

  // Jogador
  ctx.save();
  ctx.font=`${Math.round(cell*.72)}px serif`;ctx.textAlign='center';ctx.textBaseline='middle';
  ctx.fillText('ğŸ±',_px*cell+cell/2,_py*cell+cell/2);
  ctx.restore();

  // Borda decorativa
  ctx.strokeStyle='rgba(0,212,255,.25)';ctx.lineWidth=2;
  ctx.strokeRect(1,1,total-2,total-2);
}

function mv(dx,dy){
  if(_mzFinished)return;
  const nx=_px+dx,ny=_py+dy;
  if(ny<0||ny>=_mzSize||nx<0||nx>=_mzSize)return;
  if(_mzGrid[ny][nx]===1){
    // Bate na parede â€” feedback visual
    shakeWrap();return;
  }
  _px=nx;_py=ny;_mzSteps++;
  $('mzSteps').textContent=_mzSteps;
  _hintActive=false;
  drawMaze();
  if(_px===_ex&&_py===_ey){
    _mzFinished=true;
    rain(45);
    setTimeout(()=>{
      const lv=MAZE_LEVELS[_mzLv];
      const sn=_mzSteps<=lv.max*.55?3:_mzSteps<=lv.max?2:1;
      saveStars('mw_z',sn);
      _mzLv=(_mzLv+1)%MAZE_LEVELS.length;
      const coins=sn===3?30:sn===2?20:10;
      showResult('z',sn,coins,
        sn===3?'ğŸ†':sn===2?'ğŸ¥ˆ':'ğŸ¥‰',
        sn===3?'Que sortudo(a)! ğŸŒŸ':sn===2?'Muito bem! ğŸ‰':'SaÃ­da encontrada! ğŸ±',
        `SaÃ­da em ${_mzSteps} passos!${sn===3?' Perfeito!':''}`);
    },700);
  }
}

function shakeWrap(){
  const w=$('mzwrap');
  w.style.animation='none';void w.offsetWidth;
  w.style.animation='shakeWall .3s ease';
  setTimeout(()=>{w.style.animation='mazeGlow 4s ease-in-out infinite'},350);
}

// Adiciona animaÃ§Ã£o de shake ao CSS dinamicamente
const shakeStyle=document.createElement('style');
shakeStyle.textContent='@keyframes shakeWall{0%,100%{transform:translateX(0)}20%{transform:translateX(-6px)}40%{transform:translateX(6px)}60%{transform:translateX(-4px)}80%{transform:translateX(4px)}}';
document.head.appendChild(shakeStyle);

// Teclado fÃ­sico para labirinto
document.addEventListener('keydown',e=>{
  if(!document.querySelector('#sMaze.on'))return;
  const m={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0],w:[0,-1],s:[0,1],a:[-1,0],d:[1,0]};
  const d=m[e.key];if(d)mv(...d);
});

// Swipe no labirinto
(()=>{
  let sx=0,sy=0;
  const wrap=$('mzwrap');
  wrap.addEventListener('touchstart',e=>{sx=e.touches[0].clientX;sy=e.touches[0].clientY},{passive:true});
  wrap.addEventListener('touchend',e=>{
    const dx=e.changedTouches[0].clientX-sx;
    const dy=e.changedTouches[0].clientY-sy;
    const adx=Math.abs(dx),ady=Math.abs(dy);
    if(Math.max(adx,ady)<20)return;
    if(adx>ady)mv(dx>0?1:-1,0);else mv(0,dy>0?1:-1);
  },{passive:true});
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.addEventListener('DOMContentLoaded',()=>{
  goHome();

  $('btnA').addEventListener('click',()=>{showScreen('sAlpha');initAlpha()});
  $('btnM').addEventListener('click',()=>{showScreen('sMemory');initMemory()});
  $('btnZ').addEventListener('click',()=>{
    showScreen('sMaze');
    requestAnimationFrame(()=>initMaze(true));
  });

  window.addEventListener('resize',()=>{
    if(document.querySelector('#sMaze.on'))drawMaze();
    if(document.querySelector('#sMemory.on'))initMemory();
  });
});
</script>
</body>
</html>
